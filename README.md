# Airbnb-London-Property-Viewer
Application to view properties in London.

<img width="1003" alt="Screenshot 2023-09-08 at 23 31 53" src="https://github.com/za28/Airbnb-London-Property-Viewer/assets/114661472/973d678c-1165-4aa4-afe4-a0c949c39dbb">


## Overview: 
This project allows the user to view properties in London boroughs. The user is allowed to select a price range and then move onto the next page, which displays a map. Here the user can click on boroughs and view the properties within that borough. They can then click on each property to view more information. The user also has an option to add the property they are viewing to favourites.Underneath the map there is a ‘viewStatisics’ button, which displays a new window containing 8 statistics about the properties given in london. Some of them include graphs for the average prices and average reviews of each borough. The next page of the application is the favourites panel. Here the user can pick 2 properties from their favourite properties and see their description. They can also view the properties selected in google maps by clicking the ‘show in map’ button. 
## Implementation: 
This project follows the Model View Controller design pattern where the main panels are designed by their own fxml views and handled by their own controllers. The controllers make use of either ‘AirbnbDataLoader’ or ‘AttractionLoader’ models. This design pattern ensures the GUI implementation is separated from the logic of handling the GUI. 

The property viewer contains a ‘mainWindow.fxml ' with a ‘MainController’ class switches in different fxml views based on the buttons clicked by the user.
To run the application we need to run javaFx application on the ‘MainController’ class. 
## GUI and its functionalities: 
### Main Window 
The property viewer project first launches to show the user the initial screen with a blue buildings background1 and the air bnb logo at the top2. There is a top and bottom bar that is visible constantly throughout the use of the application. The top bar holds the airbnb logo and price range drop down lists (comboBox) to be selected by the user. The bottom bar holds the buttons to navigate to the next or previous panels (The panels loop around so when the last panel is reached, it loops around to the first panel again). This is handled by storing the 3 main views in an arrayList and a different view is displayed depending on ‘panelIndex’. 

The forward and back buttons can work with the forward and back arrow keys on the keyboard. This makes the application more user friendly. 
### Welcome Panel 
On the first initial panel, the user is welcomed to the application and instructed to select a price range in order to enable the initially disabled navigation buttons. Once a valid price range is selected (to ‘from’ price is less than or equal to the ‘to’ price), the buttons are enabled and the user can now switch through the rest of the panels. If the user selects an invalid price range, an alert box pops up, informing the user to try again and they are taken back to the home screen. This is handled in the ‘mainController’ class via the ‘checkInput()’ method 
### Map Panel 
The second panel is shown when the next button is selected. Here the user is presented with a map showing all boroughs that that user can choose from. The map is styled to make a new border appear around a borough hovered by the user’s mouse.

The buttons on the map are colour coordinated; the more properties available in each borough, the darker its shade. Each time the user enters a new price range the colours are updated via the ‘setBooughColours’ method in the ‘MapController’ class. Since the price range is updated in the ‘mainController’, it holds a reference to the ‘mapPanel’ view’s controller instance. 

The user can select any of the boroughs on screen which then takes them to a pop-up window (the title of the window is set to the borough name) which holds a list of all available properties and information including; host name, price, number of reviews and minimum nights. This pop-up is an instance of the ‘boroughWindow’ view, which contains a javafx tableView holding the listings within the borough selected (received from the ‘MapStatistics’ class). This statistics class loads the properties at the beginning and makes a copy of the list within ‘getBoroughProperties’, instead of within the method. By loading the properties within the method, the application slows down as every time the borough is clicked a new version of properties is loaded. The controller of the ‘boroughWindow’ view is set in the MapPanel class as that's where we receive which borough has been clicked. At the top of the pop-up window, the user has the option to sort the list by price (ascending), reviews (descending), or hosts in alphabetical order. The sorting is handled in the ‘MapStatistics’ class by 3 functions (‘sortByName’, ‘sortByPrice’, ‘sortByReviews’), which utilise streams and lambdas - causing the code to be more maintainable and readable. If the user now selects one of the properties in the list, another window pops up with further information on the property including; description, room type, last review, reviews per month and availability. Here the user can also select the button to add the property to a static ArrayList ‘favourites’ (to be used later in the favourite panel) in ‘MapStatistics’ class. This list is static as the favouritesController will also access this list to help compare items. 

### Statistics Panel 
The third panel is shown when the view statistics button is pressed on the map panel. Here the user is presented with different statistics related to the air bnb properties and location.

There are a total of 8 statistics. At the beginning all properties are loaded and added to an arrayList using the load() method in the AirbnbDataLoader. We then use this arrayList to loop round all the properties. 

**Average number of reviews:**
To find the average number of reviews we loop through all the listings and use the getReviews method to get the number of reviews each property has, this number is added to a total. The total is then divided by the total number of properties in order to obtain an average. 

**Total number of available properties:**
We loop round all of the listings and if the property is available (if availability_365 is greater than 0) then total is incremented. The total represents the number of available properties which is then shown on the statistics panel. 

**Total number of homes:**
To find the total number of homes we again loop round all of the listings and if the room type is home then total is incremented. The total represents the number of homes. This total is displayed on the statistic panel.

**Most expensive borough:**
To get the most expensive borough we need to find the average price of each borough, in order to do this we need to know how many properties each borough has. In order to acquire the amount of properties of each borough we create a HashMap in which the Key is the Borough and that is mapped to the total number of properties in that borough. This HashMap is created in the method ‘getListingPerBorough’. This method loops round all of the properties and if we already have a key in the HashMap with the neighbourhood of that property then its value is incremented by 1. If the HashMap does not have the key then the key is added and the value is set to 1. 


Once we have created the number of properties in each borough we can use this to find the average price. We created another HashMap in which we had the Key again as the borough but the initial value is the total price of the properties in the borough. We iterate through all the properties and add the price of the property multiplied by the minimum number of nights to the value. Once this is complete we then go through the hashmap and alter the values by dividing the total by the number of properties in the borough. The key that is mapped to the largest average is then returned as it is the most expensive borough. This statistic is shown when the next button is pressed on the pane that contains the most expensive borough. 


**Graph for average price:**
The primary reason we created a HashMap for the most expensive borough was so that it would be easier to populate this graph. The graph is implemented using an XYChart. The average price HashMap is passed into a graph method which populates the bar chart by setting the X value as the borough and the Y values as the average price. Having a graph showing the average price of each borough can aid the user's decision of which borough they will rent an airbnb in. 

**Graph for reviews per borough:**
The amount of properties in each borough hashMap is again used to generate a hashMap with the average number of reviews per borough. To get the average reviews per borough we add up the number of reviews for each property per borough then divide that number by the total number of properties in each borough. This is also implemented as an XYChart, with the borough as the X axis and the average number of reviews as the Y-axis. Having a graph showing the average reviews per borough helps the user decide which borough they will rent a property in. 

**Closest properties to attraction:**
We have created another csv file in which the name, longitude and latitude of several london attractions are stored. We created an attraction listing and attraction loader class that follows the structure of the airbnb loader and listing classes. We created an enum in which we defined each attraction. We have added a comboBox to the statistics panel, when an attraction is selected it is passed into a method called checkDistance. This method gets the latitude and longitude of the attraction and finds the distance from the attraction to the properties (using their latitude and longitude). To do this we used a simpler but still efficient version of the 3Haversine formula called the 4Spherical law of cosines. We created an arrayList of listings called nearestProperties which is a copy of the arrayList of all listings. We then used a lambda function on this arrayList and removed the properties that were not within a 1 mile listing of the attraction. These properties are then displayed when the user selects an attraction. We have added this stat to help users decide the properties that they would want to book depending on what attractions they want to see. Since the borough of the property is shown the user can go to the properties in the borough on the map and favourite them. 
### Current Weather
Using the openWeatherMap api5 we are able to generate the current, maximum and minimum temperature and london. Using the api key we create a url from which we can read the data. There are many different blocks of data. In order to retrieve the temperature we need the main block. From the main block we were able to retrieve the current, minimum and maximum temperature for the user to view. We have done this so that if they plan to go into london, or to book their airbnb for that day they can plan according to the weather. Since we are utilising an api, an internet connection is needed for the current weather panel to display data. If the user is not connected to the internet, a warning alert box is shown to the user. 
### Favourites Panel 
This panel enables users to compare and view details about the properties that they added to their favourites. If the user has not selected any favourite properties then they will receive a message, through an information alert, to go back to the map panel and add properties to their favourites, if they wish to view details about the properties and compare them. If the user has added properties to their favourites, upon entering the favourites panel, they will receive an information alert which will inform the user how to use the panel. This message is only shown once but if the user wants to view it again, they can do so by clicking the ‘help’ button. The user can then click ok to close the message and view the panel.

The panel has a title and here are 2 list views on the panel which have the same contents - the user’s favourite properties. The favouritePanelController accesses the favouriteProperties arraylist using a mapStatistics object. This list has all the favourite properties that the user has selected and ensures that there are no duplicates. The fact that the 2 lists are the same, allows users to select 2 properties, display them side by side and compare them. The details of the properties are hidden until the user presses the ‘show property’ button. This button displays a property and its details if a user has selected a property from the list view. There are 2 show property buttons, one below the left list view and one below the right list view. One displays a property on the left and one displays it on the right. If the user has not selected a property from a list view and then clicks the ‘show property’ button then they will receive a message informing them that they need to select a property in order to display it. The details displayed allow the user to compare the properties that they have selected, side by side, however there are also 4 more buttons at the bottom of the panel. 

There is also another button, ‘show in map’, on either side of the screen. This button will also cause a message to be displayed if the user has not displayed a property on either side of the screen but if they have then the corresponding property will be shown in Google Maps. 

The comparison buttons will allow the user to compare the quantitative details (price, availability, popularity) of the 2 properties that they have selected and the user can also do an overall comparison of the properties. The overall comparison takes into account price, availability and popularity and decides which property is the better listing by calculating a score for both properties. A point is added to the score of the property if it is cheaper, more popular or more available property. The overall better listing will be the property that has the higher score. This is all calculated in the compareOverall() method. If the user has not selected 2 properties that are being displayed at the same time then the user is unable to compare, a message will appear informing the user to display properties before comparing. 
